---
created: '2026-02-04T14:34:17.492821+00:00'
id: bg-9872f8
parent: bg-92325e
priority: 1
status: closed
tags:
- offline
- testing
title: Update conftest.py with offline mode fixtures
type: task
updated: '2026-02-05T19:42:33.401947+00:00'
---

## Description

Add test fixtures to tests/conftest.py for offline mode testing:

## New fixtures to add
```python
@pytest.fixture
def temp_home(tmp_path, monkeypatch):
    \"\"\"Temporary HOME directory for testing ~/.bodega/\"\"\"
    home = tmp_path / "home"
    home.mkdir()
    monkeypatch.setenv("HOME", str(home))
    return home

@pytest.fixture
def offline_store(temp_home, temp_git_repo):
    \"\"\"Repository with offline store configured\"\"\"
    # Get project identifier
    identifier = get_project_identifier(temp_git_repo)

    # Create offline store
    store_path = temp_home / ".bodega" / identifier
    store_path.mkdir(parents=True)
    init_repository(store_path)

    return {
        "repo_path": temp_git_repo,
        "store_path": store_path,
        "identifier": identifier
    }

@pytest.fixture
def dual_store_repo(temp_git_repo, offline_store):
    \"\"\"Repository with both local .bodega/ and offline store\"\"\"
    local_bodega = temp_git_repo / ".bodega"
    init_repository(temp_git_repo)

    return {
        "repo_path": temp_git_repo,
        "local_bodega": local_bodega,
        "offline_store": offline_store["store_path"]
    }
```

## Dependencies
Import necessary functions from bodega.utils and bodega.storage

## Notes

- 2026-02-05 19:42: tests will be updated alongside other tickets
