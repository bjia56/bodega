---
created: '2026-02-04T14:33:44.728802+00:00'
deps:
- bg-23b639
id: bg-88b272
parent: bg-92325e
priority: 2
status: open
tags:
- offline
- commands
- ux
title: Handle offline store in existing repo detection
type: task
updated: '2026-02-04T14:33:44.728956+00:00'
---

## Description

Update init command to handle cases where offline store already exists:

## Scenario 1: User runs `bodega init` in repo with existing offline store
Location: src/bodega/commands/init.py, lines 46-87

Current logic checks if .bodega/ exists locally. Need to add:
- After line 47: Also check if offline store exists
- If offline store exists but no local .bodega/:
  - Print: "Found existing offline store for this project"
  - Ask: "Initialize local .bodega/ directory? This will take precedence over offline store. [y/N]"
  - If yes: Continue with init
  - If no: Exit with message about using offline store

## Scenario 2: User runs `bodega init --offline` but offline store exists
- Check if ~/.bodega/<identifier>/ exists
- If exists and not --reset: Print message and exit
- If --reset: Reinitialize offline store

## Implementation
- Add helper function: `check_offline_store_exists(identifier: str) -> bool`
- Use click.confirm() for user prompts
- Ensure clear messaging about precedence